<!DOCTYPE html>
<html lang="en">
<head>
   
    <title> Habit Tracker</title>
    <link rel="icon" type="image/x-icon" href="../lemon.avif"/>
    <link href="https://fonts.cdnfonts.com/css/lexia" rel="stylesheet">
                

</head>
<body>

    <h1 id="title"> Month</h1>
    <h2 id="subtitle">  Monthly Habbit Tracker</h2>
    
    <!---calender area--->
<div id="calendarContainer">
    <div id="calendarDiv">
        <div id="CalendarHeading">
<p id="habbitTitle">my new habbit</p>
<p id="totalDays">0/31</p>
        </div>
<div id="calendarContent">
    <div id="tracker">
       

  <!-- Row 1 -->
  <div class="days">
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
     <div class="day">1</div>
  </div>

  <!-- Row 2 -->
  <div class="days">
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
     <div class="day">1</div>
  </div>

  <!-- Row 3 -->
  <div class="days">
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
     <div class="day">1</div>
  </div>

  <!-- Row 4 -->
  <div class="days">
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
     <div class="day">1</div>
  </div>

  <!-- Row 5 -->
  <div class="days">
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
    <div class="day">1</div>
     <div class="day">1</div>
  </div>

</div>


    </div>


</div>
    </div>
</div>

<button id="resetButton"> Reset Button</button>

</body>

<style>

body{

    background-image: url("sky.jpg");
    background-size: 500px;
    background-color: gainsboro;
    background-blend-mode: lighten;
    text-align: center;
    font-family: "kindergarten", sans-serif;
}

#title{

    margin-top: 100px;
    line-height: 10px;
}

#subtitle{

    opacity: 0.7;
    font-size: 18px;
    margin-bottom: 20px;
}

#calendarContainer{

       display: flex;
  justify-content: center; 
}

#calendarDiv{

       background-color: aliceblue;
    border-radius: 10px 10px 20px 20px;
    margin: auto;
    align-content: center;
    text-align: center;
    
}

#CalendarHeading{


    display: flex;
    justify-content: space-between;
    border-radius: 10px 10px 0px 0px;
    border: 2px solid black;
    padding: 0px 20px;
    font-size: 20px;
    background-color: cornflowerblue;
   line-height: 0px
}


#calendarContent{

    padding: 20px;


display: flex;
  justify-content: center;
 border: 2px solid black;


}

.days{
    display: flex;
}

.day{

        width: 40px;
    height: 40px;
    margin: 3px;
    font-size: 15px;

    display: flex;              
    justify-content: center;
    align-items: center;

    border-radius: 50%;         
   /*background-color: #00ffff*/




}


</style>

<script>

var date = new Date();
console.log(date);
var CurrentMonth= date.getMonth();
var CurrentDay = date.getDay();
var CurrentDate=date.getDate();
var CurrentYear = date.getFullYear()
console.log(CurrentMonth)
console.log(CurrentDay);
console.log(CurrentDate);
console.log(CurrentYear);




var months =[
"January",
"February", 
"March", 
"Apri",
       "May",
" June",
" July ",
" August  ",
" September   ",
 " October",
  " November  ",
  " December",


]

var title = document.getElementById ("title");
title.innerHTML=months[CurrentMonth];



var habbitTitle= document.getElementById("habbitTitle")

habbitTitle.onclick = function() {
 let habits= prompt("what is your habbit", habbitTitle.innerHTML)
if(habits.length==0){
  habbitTitle.innerHTML= "set yout goal";

}else{
  habbitTitle.innerHTML = habits;
}

}


var daysInTheMonthList=[31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
var daysInThisMonth=daysInTheMonthList[CurrentMonth]

var daysCompleted=0;
var totalDays=document.getElementById("totalDays")
totalDays.innerHTML = "0/" + daysInThisMonth;



var dayCount=0;
var rowCount=0;
var days= document.getElementsByClassName("days")
for(var i=0; i<days.length ; i++){

var day= days[rowCount].getElementsByClassName("day")
for(var j=0;j<day.length;j++){

  if (dayCount===CurrentDate-1){
    day[j].setAttribute("style","color:rgb(234,1,244);");
    day[j].setAttribute("style","border:2px solid black" );

  }


  if(dayCount<daysInThisMonth){
  day[j].innerHTML=dayCount+1;
  day[j].setAttribute("id", "day" +(dayCount+1));
  dayCount++;
}
else {
  day[j].innerHTML="";
  day[j].setAttribute("style", "background-color:aliceblue;")
}

}
rowCount++


}



var dayDivs = document.querySelectorAll(".day");


function makeKey(dayNum) {
  return (CurrentMonth + 1) + "-" + dayNum + "-" + CurrentYear;
}


function updateCounter() {
  var count = 0;

  for (var d = 1; d <= dayCount; d++) {
    if (localStorage.getItem(makeKey(d)) === "true") {
      count++;
    }
  }

  daysCompleted = count;
  totalDays.innerHTML = daysCompleted;
}

function paintDaysFromStorage() {
  for (var d = 1; d <= dayCount; d++) {
    var el = document.getElementById("day" + d);
    if (!el) continue;

    var val = localStorage.getItem(makeKey(d));

  
    if (val === null) {
      localStorage.setItem(makeKey(d), "false");
      val = "false";
    }

    el.style.backgroundColor = (val === "true") ? "blue" : "white";
  }
}


for (var i = 0; i < dayDivs.length; i++) {
  dayDivs[i].onclick = function () {
    var num = this.id.replace("day", ""); 
    var key = makeKey(num);

    var val = localStorage.getItem(key);
    if (val === null) val = "false";

    if (val === "false") {
      localStorage.setItem(key, "true");
      this.style.backgroundColor = "blue";
    } else {
      localStorage.setItem(key, "false");
      this.style.backgroundColor = "white";
    }

    updateCounter();
  };
}


paintDaysFromStorage();
updateCounter();



  









  </script>
</html>
